{% extends "layout.html" %}

{% block title %}
    This is CS50 Finance
{% endblock %}

{% block main %}
    <h2>{{ user[0]["username"] }}'s Portfolio</h2>
        <div style="text-align:center; max-width:1100px; margin: auto;">
                <table class="table table-hover table-sm">
                    {% if number == 0 %}
                    <thead>
                        <tr>
                            <th>You currently don't own any stock</th>
                        </tr>
                    </thead>
                    {% else %}
                    <thead>
                        <tr>
                            <th>Stock Name</th>
                            <th>Quantity</th>
                            <th>Current Value Per stock</th>
                            <th>Total Current Value</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in range(0,number) %}
                        <tr>
                            <td>{{ stocks[i]["stock"] }}</td>
                            <td>{{ stocks[i]["quantity"] }}</td>
                            <td>{{ prices[i] | usd }}</td>
                            <td>{{ (prices[i] * stocks[i]["quantity"]) | usd }}</td>
                            <td><form action="/buy" method="get">
                                <button name="stock" class="btn btn-primary" type="submit" value="{{ stocks[i]["stock"] }}">Buy more</button>
                            </form></td>
                            <td><form action="/sell" method="get">
                                <button name="stock" class="btn btn-primary" type="submit" value="{{ stocks[i]["stock"] }}">Sell</button>
                            </form></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                    {% endif %}
                </table>
                <table class="table table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Cash in account</th>
                            {% if number != 0 %}
                            <th>Cash plus Holdings</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{ user[0]["cash"] | usd }}</td>
                            {% if number != 0 %}
                            <td>{{ value | usd }}</td>
                            {% endif %}
                        </tr>
                    </tbody>
                </table>
        </div>
{% endblock %}